appId: ${APP_ID}
onFlowStart:
  - runFlow: ../common/setup.yaml
  - startRecording: recording-pokemon-lookup-journey
onFlowComplete:
  - stopRecording
---
- assertVisible: ".*Regions.*"
- takeScreenshot: "regions"

- assertVisible: ".*Kanto.*"
- assertVisible: ".*GENERATION.*"

- waitForAnimationToEnd

- tapOn: "Kanto 1ª GENERATION"
 
- assertVisible: ".*Kanto.*"
- takeScreenshot: "kanto-region-pokemon-list-1"

- assertVisible: ".*Bulbasaur.*"

- swipe:
    direction: UP
    duration: 4000

- takeScreenshot: "kanto-region-pokemon-list-2"
- waitForAnimationToEnd

- tapOn:
    id: "search-icon"
- takeScreenshot: "search-pokemon-blank"

- inputText: ${output.search.pokemon_input}
- takeScreenshot: "search-pokemon-${output.search.pokemon_input}"

- runFlow:
    when:
      platform: Android
    commands:
      - back

- runFlow:
    when:
      platform: iOS
    commands:
      - tapOn: "return"

# - tapOn: ".*${output.search.pokemon_name}.*"
- tapOn: "Nº150 Mewtwo"

- assertVisible: ".*${output.search.pokemon_name}.*"
- takeScreenshot: "mewtwo-pokemon-details"

- assertVisible: ".*Genetic.*"
- assertVisible: ".*Psychic.*"
- assertVisible: ".*This pokemon does not evolve.*"